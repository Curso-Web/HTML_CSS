<!DOCTYPE html>

<html lang="es">
<head>
	<meta name="keywords" content="web, learning, html5, css3, canvas">
	<meta name="author" content="Alejandro" >
	<meta name="application-name" content="…">
	<meta name="description" content="Ejercicios de HTML5 Canvas">
	<meta name="generator" content="Bluefish 2.2.4" >
	<meta charset="UTF-8">
	<title>Pintar en el canvas</title>
	<link rel="stylesheet" href="default.css">
    <style>
        canvas {
            border: 1px solid;
            box-shadow: 5px 5px silver;
        }

    </style>
	<link rel="shortcut icon" href="fav_icon.png">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
	
	<script>
	$(function () {
		canvasApp();
		// Aislamos los procesos del canvas en una función independiente
	}); // Fin de ready
		
	function canvasApp () {
		
		var oCanvas = document.getElementById('canvas1'); // JavaScript sin JQuery
		// var oCanvas = $('#canvas1')[0]; // opción válida en JQuery

		if (!oCanvas && !oCanvas.getContext) {
			return; }
		else {		
			var c = oCanvas.getContext('2d');
			if (!c) {
				return;
			} //Fin de la comprobación del contexto
		} // Fin de la comprobación del Canvas

        // Código que amplia el contexto

		c.randInt = function (limit) {
		    var x = Math.random() * limit;
		    return Math.floor(x);
		}
	
		c.randomRGBA = function () {
		    var r = c.randInt(255);
		    var g = c.randInt(255);
		    var b = c.randInt(255);
		    var a = Math.random();
		    var rgba = [r, g, b, a].join(",");
		    return "rgba(" + rgba + ")";
		}

	    // Código del canvas

		oCanvas.onmousemove = canvasDraw;

		function canvasDraw(oEvento) {
		    var s = 3;
		    c.fillStyle = c.randomRGBA();
		    var x = oEvento.clientX - oCanvas.offsetLeft;
		    var y = oEvento.clientY - oCanvas.offsetTop;
		    c.fillRect(x - s / 2, y - s / 2, s, s);
		} // Fin de la función canvasDraw
		
	} // Fin de la función CanvasApp

	</script>	
			
			
</head>

<body>
	<h1>Canvas</h1>
	<canvas width="600" height="400" id="canvas1">
		Este navegador no soporta canvas
	</canvas>
</body>
</html>